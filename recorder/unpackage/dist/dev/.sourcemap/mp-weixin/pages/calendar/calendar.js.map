{"version":3,"sources":["uni-app:///main.js","webpack:///D:/Hbuilder_space/recorder/pages/calendar/calendar.vue?940e","webpack:///D:/Hbuilder_space/recorder/pages/calendar/calendar.vue?ac86","webpack:///D:/Hbuilder_space/recorder/pages/calendar/calendar.vue?a3c1","webpack:///D:/Hbuilder_space/recorder/pages/calendar/calendar.vue?d822","uni-app:///pages/calendar/calendar.vue","webpack:///D:/Hbuilder_space/recorder/pages/calendar/calendar.vue?eece","webpack:///D:/Hbuilder_space/recorder/pages/calendar/calendar.vue?a297"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","weekHeader","today","lunarMonth","currentDate","year","month","date","day","firstDay","lastDay","calendar","monthDays","monthItems","onShow","created","firstWeekDay","computed","getCalendar","rows","methods","choiceDate","uni","url","getMonthItems","uniCloud","name","start","end","userId","result","handleSwitchMonth","setFirstAndLast"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,iBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAqH;AACrH;AAC4D;AACL;AACc;;;AAGrE;AACwL;AACxL,gBAAgB,gMAAU;AAC1B,EAAE,8EAAM;AACR,EAAE,mFAAM;AACR,EAAE,4FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,uFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,sTAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACjCA;AAAA;AAAA;AAAA;AAAisB,CAAgB,itBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;ACsCrtB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;EACA;EACAC;IACA;IACA;MACAV;MACAC;MACAE;MACAD;IACA;IAEA;MAAAS;IAAA;IACA;IACA;EACA;EACAC;IACAC;MAAA;MACA;MACAP;QACAQ;UACA;YACA;UACA;QACA;MACA;MACA;IACA;EACA;EACAC;IACAC;MACAC;QACAC;MACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAF;gBAAA;gBAAA,OACAG;kBACAC;kBACA1B;oBAAA2B;oBAAAC;oBAAAC;kBAAA;gBACA;cAAA;gBAAA;gBAHAC;gBAIA;gBACAR;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACAS;MACA;MACAxB;MACA;MACA;MACA;MACA;IACA;IACAyB;MACA;MACA;MACAzB;MACAA;MACA;IAEA;EACA;AAEA;AAAA,2B;;;;;;;;;;;;;ACxHA;AAAA;AAAA;AAAA;AAAwzC,CAAgB,4wCAAG,EAAC,C;;;;;;;;;;;ACA50C;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/calendar/calendar.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/calendar/calendar.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./calendar.vue?vue&type=template&id=e22e8774&\"\nvar renderjs\nimport script from \"./calendar.vue?vue&type=script&lang=js&\"\nexport * from \"./calendar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./calendar.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!C:\\\\Program Files\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/calendar/calendar.vue\"\nexport default component.exports","export * from \"-!C:\\\\Program Files\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!C:\\\\Program Files\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!C:\\\\Program Files\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!C:\\\\Program Files\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!C:\\\\Program Files\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Program Files\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./calendar.vue?vue&type=template&id=e22e8774&\"","var components\ntry {\n  components = {\n    uniIcons: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-icons/components/uni-icons/uni-icons\" */ \"@/uni_modules/uni-icons/components/uni-icons/uni-icons.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!C:\\\\Program Files\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!C:\\\\Program Files\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!C:\\\\Program Files\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!C:\\\\Program Files\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Program Files\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./calendar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!C:\\\\Program Files\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!C:\\\\Program Files\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!C:\\\\Program Files\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!C:\\\\Program Files\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Program Files\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./calendar.vue?vue&type=script&lang=js&\"","<template>\n  <view>\n    <view class=\"calendar-container\">\n      <view class=\"calendar-header\">\n        <view class=\"header\">\n          <uni-icons type=\"back\" size=\"20\" @click=\"handleSwitchMonth(-1)\"></uni-icons>\n          <view class=\"header-body\">\n            <view>{{currentDate.year}}年{{currentDate.month}}月</view>\n            <!-- <view style=\"text-align: center;\">农历{{lunarMonth}}月</view> -->\n          </view>\n          <uni-icons type=\"forward\" size=\"20\" @click=\"handleSwitchMonth(1)\"></uni-icons>\n        </view>\n        <!-- <view style>农历5月</view> -->\n        <view class=\"week-header calendar-rows\">\n          <view class=\"calendar-cols\" v-for=\"(week1, index) in weekHeader\" :key=\"index\">{{week1}}</view>\n        </view>\n      </view>\n      \n      <view class=\"calendar-body\">\n        <view class=\"calendar-rows\" v-for=\"(row, index) in getCalendar\" :key=\"index\">\n          <template>\n            <view  v-for=\"(week, index2) in row\" class=\"calendar-cols\" :key=\"index2\" @click=\"choiceDate(week)\">\n              <view :class=\"week.date == today ? 'today' : ''\">{{week.day}}</view>\n              \n              <view class=\"lunar\">{{week.lunar}}</view>\n              <template v-if=\"monthItems[week.date]\">\n                <view class=\"tag\" v-for=\"item in monthItems[week.date]\" :key=\"item._id\">{{item.theme}}</view>\n                <!-- <view class='tag'>{{week.date}}</view> -->\n              </template>\n            </view>\n          </template>\n        </view>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script>\n  import { Calendar, sloarToLunar } from './calendar.js'\n  export default {\n    data() {\n      return {\n        weekHeader: ['一', '二', '三', '四', '五', '六', '日'],\n        today: '',\n        lunarMonth: '',\n        currentDate: {\n          year: 0,\n          month: 0,\n          date: '',\n          day: 0\n        },\n        firstDay: '',\n        lastDay: '',\n        calendar: '',\n        monthDays: [],\n        monthItems: {}\n      };\n    },\n    onShow() {\n      this.getMonthItems()\n    },\n    created() {\n      const date = new Date()\n      this.currentDate = {\n        year: date.getFullYear(),\n        month: date.getMonth() + 1,\n        day: date.getDay(),\n        date: date.getDate()\n      }\n      \n      this.calendar = new Calendar({firstWeekDay: 1})\n      this.setFirstAndLast(this.currentDate.year, this.currentDate.month)\n      this.today = this.calendar.format(new Date())\n    },\n    computed: {\n      getCalendar() {\n        const calendar = this.calendar.getMonthCalendar(this.currentDate.year, this.currentDate.month)\n        calendar.forEach(rows => {\n          rows.forEach(item=> {\n            if (item) {\n              this.lunarMonth = item.lunarMonth\n            }\n          })\n        })\n        return calendar\n      }\n    },\n    methods: {\n      choiceDate (day) {\n        uni.navigateTo({\n          url: `/pages/createItem/createItem?date=${day.date}&week=${day.day}&dateCN=${day.dateCN}`\n        })\n      },\n      async getMonthItems() {\n        uni.showLoading()\n        const {result} = await uniCloud.callFunction({\n          name: 'items-co',\n          data: {start: this.firstDay, end: this.lastDay,userId:uni.getStorageSync('uid')}\n        })\n        this.monthItems = result\n        uni.hideLoading()\n      },\n      handleSwitchMonth(step) {\n        const date = new Date(this.currentDate.year, this.currentDate.month - 1, 1, 0, 0, 0)\n        date.setMonth(date.getMonth() + step)\n        this.currentDate.year = date.getFullYear()\n        this.currentDate.month = date.getMonth() + 1\n        this.setFirstAndLast(this.currentDate.year, this.currentDate.month)\n        this.getMonthItems()\n      },\n      setFirstAndLast(year, month) {\n        const date = new Date(year, month - 1)\n        this.firstDay = this.calendar.format(date)\n        date.setMonth(date.getMonth() + 1)\n        date.setDate(0)\n        this.lastDay = this.calendar.format(date)\n        \n      }\n    }\n \n  }\n</script>\n\n<style lang=\"scss\">\n.calendar-container {\n  display: flex;\n  flex-direction: column;\n  position: fixed;\n  width: 100%;\n  height: 100%;\n  .header {\n    height: 160rpx;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    .header-body {\n      margin: 0 20rpx;\n    }\n  }\n  .week-header {\n    .calendar-rows, .calendar-cols, .calendar-rows:last-child {\n      border: none;\n    }\n    &.calendar-rows {\n      height: 60rpx!important;\n      line-height: 60rpx;\n      flex-shrink: 0;\n      flex-grow: 0;\n    }\n    .calendar-cols {\n      color: #333;\n    }\n  }\n  \n  .calendar-rows {\n    flex: 1;\n    display: flex;\n    align-items: center;\n    justify-content: space-around;\n    height: 100px;\n    &:last-child {\n      border-bottom: 1rpx solid #eee;\n    }\n  }\n  .calendar-cols {\n    flex: 1;\n    border-left: 1rpx solid #eee;\n    border-top: 1rpx solid #eee;\n    box-sizing: border-box;\n    height: 100%;\n    overflow: hidden;\n    overflow-y: auto;\n    text-align: center;\n    color: #555;\n    display: flex;\n    align-items: center;\n    flex-direction: column;\n    &:last-child {\n      border-right: 1rpx solid #eee;\n    }\n    .tag {\n      width: 90%;\n      border-radius: 60px;\n      background: #FFE4BA;\n      margin: 4rpx 0;\n      height: 20px;\n      line-height: 20px;\n      font-size: 20rpx;\n    }\n    .lunar {\n      font-size: 12px;\n      color: #999;\n    }\n  }\n  \n  .calendar-body {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    \n  }\n  \n  .today {\n    color: #F53F3F;\n  }\n}\n</style>\n","import mod from \"-!C:\\\\Program Files\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!C:\\\\Program Files\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!C:\\\\Program Files\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!C:\\\\Program Files\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!C:\\\\Program Files\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!C:\\\\Program Files\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!C:\\\\Program Files\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!C:\\\\Program Files\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Program Files\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./calendar.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!C:\\\\Program Files\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!C:\\\\Program Files\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!C:\\\\Program Files\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!C:\\\\Program Files\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!C:\\\\Program Files\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!C:\\\\Program Files\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!C:\\\\Program Files\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!C:\\\\Program Files\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Program Files\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./calendar.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1687940954694\n      var cssReload = require(\"C:/Program Files/HB/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}